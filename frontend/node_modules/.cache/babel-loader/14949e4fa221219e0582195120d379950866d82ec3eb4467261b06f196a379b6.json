{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/kamil/Desktop/UczenieMaszynowe/ScrumTable-visi-DziarskiQuartet/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/kamil/Desktop/UczenieMaszynowe/ScrumTable-visi-DziarskiQuartet/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport router from '@/router';\nexport default {\n  data: function data() {\n    return {\n      registerForm: {\n        email: '',\n        first_name: '',\n        last_name: '',\n        password: ''\n      },\n      showNotification: false\n    };\n  },\n  methods: {\n    register: function register() {\n      var _this = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _this.errors = [];\n              if (_this.errors.length) {\n                _context.next = 17;\n                break;\n              }\n              _context.prev = 2;\n              _context.next = 5;\n              return axios.post('http://127.0.0.1:8000/user/create/', _this.registerForm);\n            case 5:\n              response = _context.sent;\n              console.log(response.data);\n              _this.showNotification = true;\n              _context.next = 10;\n              return _this.loginAfterRegistration(response.data.token);\n            case 10:\n              _this.clearForm();\n              window.location.reload();\n              _context.next = 17;\n              break;\n            case 14:\n              _context.prev = 14;\n              _context.t0 = _context[\"catch\"](2);\n              console.error('Registration error:', _context.t0.response.data);\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[2, 14]]);\n      }))();\n    },\n    loginAfterRegistration: function loginAfterRegistration(token) {\n      var _this2 = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var loginResponse, authToken;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return axios.post('http://127.0.0.1:8000/user/token/', {\n                email: _this2.registerForm.email,\n                password: _this2.registerForm.password\n              });\n            case 3:\n              loginResponse = _context2.sent;\n              authToken = loginResponse.data.token;\n              localStorage.setItem('token', authToken);\n              _this2.$router.push('/user-main');\n              _context2.next = 12;\n              break;\n            case 9:\n              _context2.prev = 9;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.error('Login error after registration:', _context2.t0.response.data);\n            case 12:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, null, [[0, 9]]);\n      }))();\n    },\n    clearForm: function clearForm() {\n      this.registerForm.email = '';\n      this.registerForm.first_name = '';\n      this.registerForm.last_name = '';\n      this.registerForm.password = '';\n    },\n    passwordType: function passwordType() {},\n    hideNotification: function hideNotification() {\n      this.showNotification = false;\n    }\n  }\n};","map":{"version":3,"names":["axios","router","data","registerForm","email","first_name","last_name","password","showNotification","methods","register","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","errors","length","post","sent","console","log","loginAfterRegistration","token","clearForm","window","location","reload","t0","error","stop","_this2","_callee2","loginResponse","authToken","_callee2$","_context2","localStorage","setItem","$router","push","passwordType","hideNotification"],"sources":["C:\\Users\\kamil\\Desktop\\UczenieMaszynowe\\ScrumTable-visi-DziarskiQuartet\\frontend\\src\\views\\SignUp.vue"],"sourcesContent":["<template>\r\n  <div class=\"page-sign-up\">\r\n    <div class=\"columns\">\r\n      <div class=\"column is-4 is-offset-4\">\r\n        <h1 class=\"title\">Zarejestruj się</h1>\r\n\r\n        <form @submit.prevent=\"register\">\r\n          <div class=\"field\">\r\n            <label for=\"email\">E-mail</label>\r\n            <div class=\"control\">\r\n              <input type=\"email\" class=\"input\" v-model=\"registerForm.email\" required>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"field\">\r\n            <label for=\"first_name\">Imię</label>\r\n            <div class=\"control\">\r\n              <input type=\"text\" class=\"input\" v-model=\"registerForm.first_name\" required>\r\n            </div>\r\n          </div>\r\n                  \r\n          <div class=\"field\">\r\n            <label for=\"last_name\">Nazwisko</label>\r\n            <div class=\"control\">\r\n              <input type=\"text\" class=\"input\" v-model=\"registerForm.last_name\" required>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"field\">\r\n            <label for=\"password\">Hasło</label>\r\n            <div class=\"control\">\r\n              <input type=\"password\" class=\"input\" id=\"password\" v-model=\"registerForm.password\" required>\r\n              <a @click=\"passwordType(passwordText)\" type=\"button\" class=\"mdi mdi-eye-outline\"></a>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"field\">\r\n            <div class=\"control\">\r\n              <router-link to=\"/user-main\" class=\"button is-dark\" @click=\"register\">Zarejestruj</router-link>\r\n            </div>\r\n          </div>\r\n\r\n          <hr>\r\n\r\n          Masz już konto?  <router-link to=\"/log-in\">Kliknij tutaj</router-link> żeby się zalogować!\r\n        </form>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-if=\"showNotification\" class=\"notification-container\">\r\n      <div class=\"notification is-success\">\r\n        <button class=\"delete\" @click=\"hideNotification\"></button>\r\n        Rejestracja udana! <i class=\"fas fa-check-circle\"></i>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport router from '@/router';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      registerForm: {\r\n        email: '',\r\n        first_name: '',\r\n        last_name: '',\r\n        password: ''\r\n      },\r\n      showNotification: false\r\n    };\r\n  },\r\n  methods: {\r\n    async register() {\r\n      this.errors = [];\r\n\r\n      if (!this.errors.length) {\r\n        try {\r\n          const response = await axios.post('http://127.0.0.1:8000/user/create/', this.registerForm);\r\n          console.log(response.data);\r\n          this.showNotification = true;\r\n          await this.loginAfterRegistration(response.data.token);\r\n          this.clearForm();\r\n          window.location.reload();\r\n\r\n        } catch (error) {\r\n          console.error('Registration error:', error.response.data);\r\n        }\r\n      }\r\n    },\r\n    async loginAfterRegistration(token) {\r\n      try {\r\n        const loginResponse = await axios.post('http://127.0.0.1:8000/user/token/', {\r\n          email: this.registerForm.email,\r\n          password: this.registerForm.password\r\n        });\r\n\r\n        const authToken = loginResponse.data.token;\r\n        localStorage.setItem('token', authToken);\r\n        this.$router.push('/user-main');\r\n      } catch (error) {\r\n        console.error('Login error after registration:', error.response.data);\r\n      }\r\n    },\r\n    clearForm() {\r\n      this.registerForm.email = '';\r\n      this.registerForm.first_name = '';\r\n      this.registerForm.last_name = '';\r\n      this.registerForm.password = '';\r\n    },\r\n    passwordType() {\r\n    },\r\n    hideNotification() {\r\n      this.showNotification = false;\r\n    },\r\n  }\r\n};\r\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}