{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/szymo/Desktop/gole baby i milfy/studia/scrum/test17kwietnia/ScrumTable-visi-DziarskiQuartet/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/szymo/Desktop/gole baby i milfy/studia/scrum/test17kwietnia/ScrumTable-visi-DziarskiQuartet/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/web.timers.js\";\nimport axios from 'axios';\nexport default {\n  data: function data() {\n    return {\n      loginForm: {\n        email: '',\n        password: ''\n      },\n      showNotification: false\n    };\n  },\n  methods: {\n    login: function login() {\n      var _this = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var response, token;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return axios.post('http://127.0.0.1:8000/user/token/', _this.loginForm);\n            case 3:\n              response = _context.sent;\n              token = response.data.token;\n              localStorage.setItem('token', token); // Zapisz token w localStorage\n              console.log('Login successful');\n              console.log(token);\n              _this.showNotification = true;\n              _context.next = 14;\n              break;\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](0);\n              console.error('Login error:', _context.t0.response.data);\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[0, 11]]);\n      }))();\n    },\n    hideNotification: function hideNotification() {\n      this.showNotification = false;\n      this.$router.push('/');\n    },\n    goToUserPanel: function goToUserPanel() {\n      this.$router.push('/user-main'); // Przekieruj do /user-main\n      setTimeout(function () {\n        window.location.reload(); // Odśwież /user-main\n      }, 2);\n    }\n  }\n};","map":{"version":3,"names":["axios","data","loginForm","email","password","showNotification","methods","login","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","token","wrap","_callee$","_context","prev","next","post","sent","localStorage","setItem","console","log","t0","error","stop","hideNotification","$router","push","goToUserPanel","setTimeout","window","location","reload"],"sources":["C:\\Users\\szymo\\Desktop\\gole baby i milfy\\studia\\scrum\\test17kwietnia\\ScrumTable-visi-DziarskiQuartet\\frontend\\src\\views\\LogIn.vue"],"sourcesContent":["<template>\r\n  <div class=\"page-log-in\">\r\n    <div class=\"columns\">\r\n      <div class=\"column is-4 is-offset-4\">\r\n        <h1 class=\"title\">Zaloguj się</h1>\r\n\r\n        <form @submit.prevent=\"login\">\r\n          <div class=\"field\">\r\n            <label for=\"loginEmail\">Email:</label>\r\n            <div class=\"control\">\r\n              <input type=\"email\" id=\"loginEmail\" class=\"input\" v-model=\"loginForm.email\" required>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"field\">\r\n            <label for=\"loginPassword\">Hasło:</label>\r\n            <div class=\"control\">\r\n              <input type=\"password\" id=\"loginPassword\" class=\"input\" v-model=\"loginForm.password\" required>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"field\">\r\n            <div class=\"control\">\r\n              <button class=\"button is-dark\" type=\"submit\">Zaloguj</button>\r\n            </div>\r\n          </div>\r\n\r\n          Lub <router-link to=\"/sign-up\">kliknij tutaj</router-link> żeby sę zarejestrować!\r\n        </form>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-if=\"showNotification\" class=\"notification-container\">\r\n      <div class=\"notification is-success\">\r\n        <button class=\"delete\" @click=\"hideNotification\"></button>\r\n        <div class=\"notification-content\">\r\n          <p class=\"notification-message\">\r\n            Logowanie udane!\r\n            <br>\r\n            Czy chcesz przejść do panelu użytkownika?\r\n            <br>\r\n          </p>\r\n          <div class=\"notification-buttons\">\r\n            <button class=\"button is-success is-large\" @click=\"goToUserPanel\" style=\"background-color: lightgreen;\">Tak</button>\r\n            <button class=\"button is-danger is-large\" @click=\"hideNotification\">Nie</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      loginForm: {\r\n        email: '',\r\n        password: ''\r\n      },\r\n      showNotification: false\r\n    };\r\n  },\r\n  methods: {\r\n    async login() {\r\n      try {\r\n        const response = await axios.post('http://127.0.0.1:8000/user/token/', this.loginForm);\r\n        \r\n        const token = response.data.token;\r\n        localStorage.setItem('token', token); // Zapisz token w localStorage\r\n        console.log('Login successful');\r\n        console.log(token);\r\n\r\n        this.showNotification = true;\r\n      } catch (error) {\r\n        console.error('Login error:', error.response.data);\r\n      }\r\n    },\r\n    hideNotification() {\r\n      this.showNotification = false;\r\n      this.$router.push('/');\r\n    },\r\n    goToUserPanel() {\r\n      this.$router.push('/user-main'); // Przekieruj do /user-main\r\n      setTimeout(() => {\r\n        window.location.reload(); // Odśwież /user-main\r\n      }, 2);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped src=\"../../style/Login.css\"></style>\r\n"],"mappings":";;;;AAqDA,OAAOA,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,IAAI,WAAAA,KAAA,EAAG;IACL,OAAO;MACLC,SAAS,EAAE;QACTC,KAAK,EAAE,EAAE;QACTC,QAAQ,EAAE;MACZ,CAAC;MACDC,gBAAgB,EAAE;IACpB,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACDC,KAAK,WAAAA,MAAA,EAAG;MAAA,IAAAC,KAAA;MAAA,OAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAA;QAAA,IAAAC,QAAA,EAAAC,KAAA;QAAA,OAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAE,IAAA;cAAA,OAEanB,KAAK,CAACoB,IAAI,CAAC,mCAAmC,EAAEZ,KAAI,CAACN,SAAS,CAAC;YAAA;cAAhFW,QAAO,GAAAI,QAAA,CAAAI,IAAA;cAEPP,KAAI,GAAID,QAAQ,CAACZ,IAAI,CAACa,KAAK;cACjCQ,YAAY,CAACC,OAAO,CAAC,OAAO,EAAET,KAAK,CAAC,EAAE;cACtCU,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAC;cAC/BD,OAAO,CAACC,GAAG,CAACX,KAAK,CAAC;cAElBN,KAAI,CAACH,gBAAe,GAAI,IAAI;cAAAY,QAAA,CAAAE,IAAA;cAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAS,EAAA,GAAAT,QAAA;cAE5BO,OAAO,CAACG,KAAK,CAAC,cAAc,EAAEV,QAAA,CAAAS,EAAA,CAAMb,QAAQ,CAACZ,IAAI,CAAC;YAAA;YAAA;cAAA,OAAAgB,QAAA,CAAAW,IAAA;UAAA;QAAA,GAAAhB,OAAA;MAAA;IAEtD,CAAC;IACDiB,gBAAgB,WAAAA,iBAAA,EAAG;MACjB,IAAI,CAACxB,gBAAe,GAAI,KAAK;MAC7B,IAAI,CAACyB,OAAO,CAACC,IAAI,CAAC,GAAG,CAAC;IACxB,CAAC;IACDC,aAAa,WAAAA,cAAA,EAAG;MACd,IAAI,CAACF,OAAO,CAACC,IAAI,CAAC,YAAY,CAAC,EAAE;MACjCE,UAAU,CAAC,YAAM;QACfC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC,EAAE;MAC5B,CAAC,EAAE,CAAC,CAAC;IACP;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}