{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/Kamil/Desktop/Studia/Semestr VII/ScrumTable/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/Kamil/Desktop/Studia/Semestr VII/ScrumTable/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/web.timers.js\";\nimport axios from 'axios';\nexport default {\n  data: function data() {\n    return {\n      editedSectionName: '',\n      sectionId: null,\n      boardId: null,\n      boardName: '',\n      showNotification: false\n    };\n  },\n  mounted: function mounted() {\n    console.log(\"Params:\", this.$route.params);\n    this.sectionId = this.$route.params.section_id;\n    this.boardId = this.$route.params.board_id;\n  },\n  methods: {\n    goBack: function goBack() {\n      // Przekierowanie użytkownika na poprzednią stronę\n      this.$router.go(-1);\n    },\n    updateSection: function updateSection() {\n      var _this = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var token, response0, response1, response2;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              token = localStorage.getItem('token');\n              _context.next = 4;\n              return axios.get(\"http://127.0.0.1:8000/board/\".concat(_this.boardId, \"/\"));\n            case 4:\n              response0 = _context.sent;\n              _this.boardName = response0.data.name;\n              _context.next = 8;\n              return axios.get(\"http://127.0.0.1:8000/board/\".concat(_this.$route.params.board_id, \"/\"));\n            case 8:\n              response1 = _context.sent;\n              _this.board_id = response1.data.id;\n              _context.next = 12;\n              return axios.put(\"http://127.0.0.1:8000/section/\".concat(_this.board_id, \"/update_section/\").concat(_this.sectionId, \"/\"), {\n                name: _this.editedSectionName,\n                board: null\n              }, {\n                headers: {\n                  Authorization: \"Token \".concat(token)\n                }\n              });\n            case 12:\n              response2 = _context.sent;\n              console.log('Section updated:', response2.data);\n              //this.$router.go(-1); // Przekierowanie użytkownika po zapisaniu zmian\n              _this.showNotification = true;\n              _context.next = 21;\n              break;\n            case 17:\n              _context.prev = 17;\n              _context.t0 = _context[\"catch\"](0);\n              console.error('Error updating section:', _context.t0);\n              console.log(\"Board id: \", _this.board_id, _this.sectionId, _this.boardName);\n            case 21:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[0, 17]]);\n      }))();\n    },\n    hideNotification: function hideNotification() {\n      this.showNotification = false;\n    },\n    goToTable: function goToTable() {\n      this.$router.go(-1); // Przekieruj do /user-main\n      setTimeout(function () {\n        window.location.reload(); // Odśwież /user-main\n      }, 2);\n    }\n  }\n};","map":{"version":3,"names":["axios","data","editedSectionName","sectionId","boardId","boardName","showNotification","mounted","console","log","$route","params","section_id","board_id","methods","goBack","$router","go","updateSection","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","token","response0","response1","response2","wrap","_callee$","_context","prev","next","localStorage","getItem","get","concat","sent","name","id","put","board","headers","Authorization","t0","error","stop","hideNotification","goToTable","setTimeout","window","location","reload"],"sources":["C:\\Users\\Kamil\\Desktop\\Studia\\Semestr VII\\ScrumTable\\frontend\\src\\views\\EditSection.vue"],"sourcesContent":["<template>\r\n    <div class=\"page-edit-section\">\r\n      <div class=\"columns\">\r\n        <div class=\"column is-4 is-offset-4\">\r\n          <h1 class=\"title\">Edytuj Sekcję</h1>\r\n  \r\n          <form @submit.prevent=\"updateSection\">\r\n            <div class=\"field\">\r\n              <label for=\"editedSectionName\">Nazwa Sekcji:</label>\r\n              <div class=\"control\">\r\n                <input type=\"text\" id=\"editedSectionName\" class=\"input\" v-model=\"editedSectionName\" required>          \r\n              </div>\r\n            </div>\r\n  \r\n            <div class=\"field\">\r\n              <div class=\"control\">\r\n                <button class=\"button is-dark submit-button\" type=\"submit\" >Zapisz Zmiany</button>\r\n                <button class=\"button is-dark dark-button\" @click=\"goBack\">Powrót</button>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n      <div v-if=\"showNotification\" class=\"notification-container\">\r\n          <div class=\"notification is-success\">\r\n            <button class=\"delete\" @click=\"hideNotification\"></button>\r\n            <div class=\"notification-content\">\r\n              <p class=\"notification-message\">\r\n                Edycja udana!\r\n                <br>\r\n                Czy chcesz wrócić do widoku tabeli?\r\n                <br>\r\n              </p>\r\n              <div class=\"notification-buttons\">\r\n                <button class=\"button is-success is-large\" @click=\"goToTable\" style=\"background-color: lightgreen;\">Tak</button>\r\n                <button class=\"button is-danger is-large\" @click=\"hideNotification\">Nie</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n    </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import axios from 'axios';\r\n  \r\n  export default {\r\n    data() {\r\n      return {\r\n      editedSectionName: '',\r\n      sectionId: null,\r\n      boardId: null,\r\n      boardName: '',\r\n      showNotification: false\r\n      };\r\n    },\r\n\r\n    mounted(){\r\n        console.log(\"Params:\", this.$route.params);\r\n        this.sectionId = this.$route.params.section_id;\r\n        this.boardId = this.$route.params.board_id;\r\n        \r\n    },\r\n\r\n    methods: {\r\n        goBack() {\r\n          // Przekierowanie użytkownika na poprzednią stronę\r\n          this.$router.go(-1);\r\n        },\r\n\r\n        async updateSection() {\r\n          try {\r\n            const token = localStorage.getItem('token');\r\n            \r\n            const response0 = await axios.get(`http://127.0.0.1:8000/board/${this.boardId}/`);\r\n            this.boardName = response0.data.name;\r\n\r\n            const response1 = await axios.get(`http://127.0.0.1:8000/board/${this.$route.params.board_id}/`);\r\n            this.board_id = response1.data.id;\r\n\r\n            const response2 = await axios.put(\r\n              `http://127.0.0.1:8000/section/${this.board_id}/update_section/${this.sectionId}/`,\r\n              { name: this.editedSectionName, board: null},\r\n              { headers: { Authorization: `Token ${token}` } }\r\n            );\r\n\r\n            console.log('Section updated:', response2.data);\r\n            //this.$router.go(-1); // Przekierowanie użytkownika po zapisaniu zmian\r\n            this.showNotification=true;\r\n          } catch (error) {\r\n            console.error('Error updating section:', error);\r\n            console.log(\"Board id: \",this.board_id, this.sectionId, this.boardName);\r\n          }\r\n        },\r\n\r\n        hideNotification() {\r\n        this.showNotification = false;\r\n        },\r\n\r\n        goToTable() {\r\n        this.$router.go(-1); // Przekieruj do /user-main\r\n        setTimeout(() => {\r\n          window.location.reload(); // Odśwież /user-main\r\n        }, 2);\r\n      }\r\n    }\r\n  }\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .page-edit-section {\r\n    margin-top: 50px; \r\n  }\r\n  \r\n  .title {\r\n    text-align: center; \r\n  }\r\n  \r\n  .submit-button {\r\n   background-color: #95da8f;\r\n   color:black;\r\n  }\r\n\r\n  .submit-button:hover {\r\n   background-color: #669762;\r\n  }\r\n\r\n  .dark-button {\r\n    background-color: #f55656 !important;\r\n    margin-left: 320px;\r\n    padding-left: 35px;\r\n    padding-right: 35px;\r\n  }\r\n  \r\n  .dark-button:hover {\r\n    background-color: #923232 !important;\r\n  }\r\n\r\n  .notification-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 100%;\r\n}\r\n\r\n.notification {\r\n  max-width: 400px;\r\n  padding: 20px;\r\n}\r\n\r\n.notification-content {\r\n  text-align: center;\r\n}\r\n\r\n.notification-message {\r\n  margin-bottom: 20px;\r\n  font-size: 20px;\r\n}\r\n\r\n.notification-buttons {\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n.notification-buttons .button {\r\n  margin: 0 10px;\r\n}\r\n  </style>\r\n  "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}